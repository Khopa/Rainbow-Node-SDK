{
    "describe": "UserProfile API", 
    "starring": {
        "admin": {
            "robert": {
                "email": "rford@westworld.com",
                "password": "Password_123"
            }
        },
        "actors": {
            "maeve": {
                "email": "mmillay@host-westworld.com",
                "firstname": "Maeve",
                "lastname": "Millay",
                "company": "Westworld Host",
                "password": "Password_123"
            }
        }
    },
    "runBeforeAll": {
        "it": {
            "should": "Log-in with Maeve successfully",
            "by": [
                {
                    "executing": "api:connection.signin", 
                    "injecting": ["usr:maeve.email", "usr:maeve.password"], 
                    "resulting": "account", 
                    "expecting": [{"var:account": "$defined"}],
                    "using": ["maeve"]
                }
            ]
        }
    },  
    "runAfterAll": {
        "it": {
            "should": "Log-out with Maeve successfully",
            "by": [
                {
                    "executing": "api:connection.signout", 
                    "injecting": [], 
                    "resulting": null, 
                    "expecting": [],
                    "using": ["maeve"]
                }
            ]
        }
    },
    "run": [
        {
             "it": {
                "should": "Update Maeve first name",
                "by": [
                    {
                        "executing": "api:userProfile.updateFirstName", 
                        "injecting": ["NewFirstName"], 
                        "resulting": "newProfileFirstName", 
                        "expecting": [{"var:newProfileFirstName": "$defined"}, {"var:newProfileFirstName.firstName": "$defined"}, {"var:newProfileFirstName.firstName": "NewFirstName"}],
                        "using": ["maeve"]
                    },
                    {
                        "executing": "exe:pause", 
                        "duration": [3000]
                    },
                    {
                        "executing": "api:contacts.getConnectedUser", 
                        "injecting": [], 
                        "resulting": "connectedUser", 
                        "expecting": [{"var:connectedUser": "$defined"}, {"var:connectedUser.firstname": "$defined"}, {"var:connectedUser.firstname": "NewFirstName"}],
                        "using": ["maeve"]
                    }
                ]
            }
        },
        {
            "it": {
               "should": "Update Maeve lastname",
               "by": [
                   {
                       "executing": "api:userProfile.updateLastName", 
                       "injecting": ["NewName"], 
                       "resulting": "newProfileLastName", 
                       "expecting": [{"var:newProfileLastName": "$defined"}, {"var:newProfileLastName.lastName": "$defined"}, {"var:newProfileLastName.lastName": "NewName"}],
                       "using": ["maeve"]
                    },
                    {
                        "executing": "exe:pause", 
                        "duration": [3000]
                    },
                    {
                    "executing": "api:contacts.getConnectedUser", 
                    "injecting": [], 
                    "resulting": "connectedUser", 
                    "expecting": [{"var:connectedUser": "$defined"}, {"var:connectedUser.lastname": "$defined"}, {"var:connectedUser.lastname": "NewName"}],
                       "using": ["maeve"]
                   }
               ]
           }
        },
        {
            "it": {
               "should": "Add Maeve phone",
               "by": [
                   {
                       "executing": "api:userProfile.updatePhoneNumber", 
                       "injecting": ["home", "landline", "0123456789"], 
                       "resulting": "null", 
                       "expecting": [],
                       "using": ["maeve"]
                    },
                    {
                        "executing": "exe:pause", 
                        "duration": [3000]
                    },
                   {
                    "executing": "api:contacts.getConnectedUser", 
                    "injecting": [], 
                    "resulting": "connectedUser", 
                    "expecting": [{"var:connectedUser": "$defined"}, {"var:connectedUser.phonePerso": "$defined"}, {"var:connectedUser.phonePerso": "0123456789"}],
                    "using": ["maeve"]
                   }
               ]
           }
        },
        {
            "it": {
               "should": "Add Maeve avatar",
               "by": [
                   {
                       "executing": "api:userProfile.updatePhotoFromUrl", 
                       "injecting": ["/afterbuild/assets/appLogo.png"], 
                       "resulting": "null", 
                       "expecting": [],
                       "using": ["maeve"]
                   }
               ]
           }
        }
    ]
}