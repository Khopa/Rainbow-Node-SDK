{
    "describe": "CONNECTION API", 
    "starring": {
        "admin": {
            "robert": {
                "email": "rford@westworld.com",
                "password": "Password_123"
            }
        },
        "actors": {
            "dolores": {
                "email": "dabernathy@host-westworld.com",
                "password": "Password_123",
                "company": "Westworld Host",
                "firstname": "Dolores",
                "lastname": "Abernathy"
            }
        }
    },
    "run": [
        {
            "it": {
                "should": "log-in with Dolores, check her presence status and then log-out properly",
                "by": [
                    {
                        "executing": "api:connection.signin", 
                        "injecting": ["usr:dolores.email", "usr:dolores.password"], 
                        "resulting": "account", 
                        "expecting": [{"var:account.account.userId": "$defined"}, {"var:account.account.loginEmail": "$defined"}, {"var:account.account.companyId": "$defined"}],
                        "using": ["dolores"]
                    },
                    {
                        "executing": "api:connection.getState", 
                        "injecting": [], 
                        "resulting": "state", 
                        "expecting": [{"var:state": "$defined"}, {"var:state": "connected"}],
                        "using": ["dolores"]
                    },
                    {
                        "executing": "api:connection.getToken", 
                        "injecting": [], 
                        "resulting": "token", 
                        "expecting": [{"var:token": "$defined"}],
                        "using": ["dolores"]
                    },
                    {
                        "executing": "api:connection.signout", 
                        "injecting": [], 
                        "resulting": null, 
                        "expecting": [],
                        "using": ["dolores"]
                    },
                    {
                        "executing": "api:connection.getState", 
                        "injecting": [], 
                        "resulting": "newState", 
                        "expecting": [{"var:newState": "$defined"}, {"var:newState": "disconnected"}],
                        "using": ["dolores"]
                    }
                ]
            }
        },

        {
            "it": {
                "should": "log-in with Dolores, retreive her information once connected and then log-out",
                "by": [
                    {
                        "executing": "api:connection.signin", 
                        "injecting": ["usr:dolores.email", "usr:dolores.password"], 
                        "resulting": "account", 
                        "expecting": [{"var:account.account.userId": "$defined"}, {"var:account.account.loginEmail": "$defined"}, {"var:account.account.companyId": "$defined"}],
                        "using": ["dolores"]
                    },
                    {
                        "executing": "api:contacts.getConnectedUser", 
                        "injecting": [], 
                        "resulting": "connectedUser", 
                        "expecting": [{"var:connectedUser": "$defined"}, {"var:connectedUser.loginEmail": "#dabernathy@host-westworld.com"}],
                        "using": ["dolores"]
                    },
                    {
                        "executing": "api:connection.signout", 
                        "injecting": [], 
                        "resulting": null, 
                        "expecting": [],
                        "using": ["dolores"]
                    }
                ]
            }
        }
    ]
}